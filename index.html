<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antigravity Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:ital,wght@1,600&display=swap" rel="stylesheet">

    <style>
        /* ================== åŸºç¡€æ ·å¼ ================== */
        body { margin: 0; background-color: #f0f2f5; font-family: 'Inter', sans-serif; color: #1f1f1f; overflow-x: hidden; }
        
        /* âš ï¸ è¿™é‡Œçš„ opacity æ”¹å› 1 äº†ï¼å°±ç®—JSæŒ‚äº†ï¼Œä¹Ÿèƒ½çœ‹åˆ°å­— */
        .content-layer {
            position: relative; z-index: 10; width: 100%; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            opacity: 1; /* å¼ºåˆ¶æ˜¾ç¤º */
        }

        /* å¯¼èˆª */
        nav {
            position: fixed; top: 0; left: 0; right: 0; padding: 20px 40px;
            display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(to bottom, rgba(255,255,255,0.95), rgba(255,255,255,0));
            z-index: 100;
        }
        .brand-container { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .nav-icon { height: 32px; width: auto; }
        .logo-text { font-family: 'Inter', sans-serif; font-weight: 800; font-size: 1.4rem; color: #1a1a1a; letter-spacing: -0.5px; text-transform: uppercase; }

        /* Hero */
        .hero-section { margin-top: 15vh; margin-bottom: 40px; text-align: center; }
        .title-wrapper h1 { font-size: 5.5rem; line-height: 1.0; margin: 0 0 10px 0; color: #1a1a1a; letter-spacing: -2px; }
        .word-digital { font-family: 'Inter', sans-serif; font-weight: 800; }
        .word-biology { font-family: 'Playfair Display', serif; font-style: italic; font-weight: 600; }
        .hero-section p { font-size: 0.9rem; color: #666; letter-spacing: 1px; margin-top: 20px; }

        /* ç­›é€‰æ  */
        .filter-wrapper {
            display: flex; gap: 8px; justify-content: center;
            background: rgba(255,255,255,0.5); backdrop-filter: blur(10px);
            padding: 6px; border-radius: 50px; margin-top: 40px;
            border: 1px solid rgba(255,255,255,0.6);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        .filter-btn {
            border: none; background: transparent; padding: 10px 24px; border-radius: 40px;
            cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center;
        }
        .filter-btn .zh { font-size: 0.9rem; font-weight: 700; color: #555; }
        .filter-btn .en { font-size: 0.6rem; font-weight: 600; color: #999; margin-top: 2px; text-transform: uppercase; }
        .filter-btn:hover { background: rgba(255,255,255,0.8); }
        .filter-btn.active { background: #1a1a1a; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .filter-btn.active .zh { color: #fff; }
        .filter-btn.active .en { color: rgba(255,255,255,0.7); }

        @media (max-width: 600px) {
            .hero-section { padding: 0 20px; margin-top: 12vh; }
            .title-wrapper h1 { font-size: 3rem; }
            .filter-wrapper { display: grid; grid-template-columns: repeat(3, 1fr); border-radius: 20px; padding: 10px; width: 90%; }
            .filter-btn { padding: 8px 0; background: rgba(255,255,255,0.5); width: 100%; }
            .nav-icon { height: 24px; } nav { padding: 15px 20px; }
        }

        /* ç€‘å¸ƒæµå®¹å™¨ */
        .galleries-wrapper { width: 100%; max-width: 1600px; padding: 0 40px 100px; box-sizing: border-box; }
        .gallery-pane { display: none; align-items: flex-start; justify-content: center; gap: 30px; width: 100%; }
        .gallery-pane.active { display: flex; }
        .masonry-column { flex: 1; display: flex; flex-direction: column; gap: 30px; min-width: 0; }

        /* å¡ç‰‡ */
        .photo-card {
            width: 100%; border-radius: 16px; overflow: hidden;
            background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.6);
            box-shadow: 0 4px 15px rgba(0,0,0,0.03); 
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.4s ease;
            cursor: pointer; display: flex; flex-direction: column; position: relative;
        }
        .photo-card:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(66, 133, 244, 0.12); background: #fff; z-index: 2; }
        .media-wrapper { position: relative; width: 100%; background: rgba(0,0,0,0.05); overflow: hidden; }
        .photo-card img, .photo-card video { width: 100%; height: 100%; display: block; object-fit: cover; transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .photo-card:hover img, .photo-card:hover video { transform: scale(1.05); }
        .card-info { padding: 16px 20px; background: rgba(255,255,255,0.4); }
        .card-tag { font-size: 0.7rem; font-weight: 700; color: #4285F4; text-transform: uppercase; display: block; margin-bottom: 4px; }
        .card-title { font-size: 0.95rem; font-weight: 800; color: #222; margin: 0; letter-spacing: 0.5px; text-transform: uppercase; }
        .video-badge { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.6); color: #fff; padding: 3px 6px; border-radius: 4px; font-size: 0.6rem; font-weight: 700; backdrop-filter: blur(4px); z-index: 5; }

        /* ç¯ç®± */
        #lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; backdrop-filter: blur(10px); }
        #lightbox.active { opacity: 1; pointer-events: auto; }
        #lightbox-content { max-width: 90%; max-height: 90%; display: flex; justify-content: center; align-items: center; }
        #lightbox img, #lightbox video { max-width: 100%; max-height: 90vh; border-radius: 4px; box-shadow: 0 0 50px rgba(0,0,0,0.5); transform: scale(0.95); transition: transform 0.3s; }
        #lightbox.active img, #lightbox.active video { transform: scale(1); }
        .close-btn { position: absolute; top: 30px; right: 40px; color: #fff; font-size: 2rem; cursor: pointer; }

        footer { padding: 40px; text-align: center; color: #888; font-size: 0.9rem; margin-top: auto; }
    </style>
</head>
<body>
    
    <div id="lightbox" onclick="closeLightbox()"><div class="close-btn">&times;</div><div id="lightbox-content"></div></div>

    <nav>
        <a href="#" class="brand-container">
            <svg class="nav-icon" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 4L4 36H36L20 4Z" fill="url(#paint0_linear)"/>
                <circle cx="20" cy="24" r="6" fill="white"/>
                <defs><linearGradient id="paint0_linear" x1="20" y1="4" x2="20" y2="36" gradientUnits="userSpaceOnUse"><stop stop-color="#4285F4"/><stop offset="1" stop-color="#40E0D0"/></linearGradient></defs>
            </svg>
            <span class="logo-text">ART PORTFOLIO</span>
        </a>
    </nav>

    <div class="content-layer">
        <div class="hero-section">
            <div class="title-wrapper">
                <h1><span class="word-digital">Design</span><span class="word-biology">Portfolio.</span></h1>
                <p>Check out the latest online display of the portfolio</p>
            </div>
            <div class="filter-wrapper" id="filters"></div>
        </div>

        <div class="galleries-wrapper" id="galleries-root"></div>
        <footer>Â© 2026 Created by Zhangbling & Gemini</footer>
    </div>

    <script>
        // =========================================================================
        // ğŸ“ ã€ä½œå“æ¸…å• - è¯·å°å¿ƒç¼–è¾‘ï¼Œä¸è¦åˆ æ‰æ‹¬å·ã€‘
        // =========================================================================
        // æˆ‘çœ‹ä½ ä¹‹å‰çš„æˆªå›¾ï¼ŒCartoonæ–‡ä»¶å¤¹ä¸‹æœ‰ 1.webp åˆ° 30.webp
        // æ‰€ä»¥æˆ‘è¿™é‡Œé»˜è®¤å¸®ä½ å†™å¥½äº† Cartoon çš„ä»£ç ã€‚
        
        const PROJECTS = [
            // --- ç¤ºä¾‹å›¾ç‰‡ (è¯·ç¡®ä¿è¿™äº›å›¾ç‰‡åœ¨ images æ–‡ä»¶å¤¹é‡ŒçœŸå®å­˜åœ¨) ---
            
            // å¦‚æœä½ çš„å›¾ç‰‡æ˜¯ jpgï¼Œå°±æŠŠ .webp æ”¹æˆ .jpg
            // å¦‚æœä½ çš„å›¾ç‰‡åœ¨ CG Style æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œå°±å†™ CG Style/1.jpg
            
            // ä¸‹é¢è¿™è¡Œä»£ç ä¼šè‡ªåŠ¨ç”Ÿæˆ Cartoon/1.webp åˆ° Cartoon/30.webp
            // åªè¦ä½ æ²¡åˆ æ‰é‚£ä¸ª for å¾ªç¯ï¼Œè¿™ 30 å¼ å›¾å°±ä¼šæ˜¾ç¤ºå‡ºæ¥
        ];

        // è‡ªåŠ¨æ·»åŠ  Cartoon æ–‡ä»¶å¤¹ä¸‹çš„ 30 å¼  webp å›¾ç‰‡
        for (let i = 1; i <= 30; i++) {
            PROJECTS.push({
                file: `Cartoon/${i}.webp`, // ğŸ‘ˆ æ³¨æ„ï¼šè¿™é‡Œå†™çš„æ˜¯ .webp
                title: `æ¬§ç¾å¡é€šä½œå“ ${i}`, // ğŸ‘ˆ è¿™é‡Œçš„æ ‡é¢˜ä¼šè‡ªåŠ¨å˜
                category: 'Cartoon'
            });
        }

        // =========================================================================

        const CATEGORIES = [
            { id: 'CG Style',    name: 'CGé£æ ¼',    en: 'CG Style' }, 
            { id: 'Cartoon',     name: 'æ¬§ç¾å¡é€š',  en: 'Cartoon' },
            { id: 'Icon Design', name: 'iconè®¾è®¡',  en: 'Icon Design' },
            { id: 'Character',   name: 'è§’è‰²åŸç”»',  en: 'Character' },
            { id: 'Other',       name: 'å…¶ä»–ç±»å‹',  en: 'Other' },
        ];

        // -------------------------------------------------------------------------
        // ğŸš€ æ ¸å¿ƒé€»è¾‘
        // -------------------------------------------------------------------------
        const filters = document.getElementById('filters');
        const galleriesRoot = document.getElementById('galleries-root');
        const lightbox = document.getElementById('lightbox');
        const lightboxContent = document.getElementById('lightbox-content');
        let columnHeights = [];
        let columnsDOM = [];
        let pendingItems = {}; 

        function initPortfolio() {
            try {
                createFilterBtn('all', 'å…¨éƒ¨ä½œå“', 'ALL WORKS', true);
                CATEGORIES.forEach(cat => createFilterBtn(cat.id, cat.name, cat.en));
                loadCategory('all');
                setInterval(processQueue, 200);
            } catch (e) {
                console.error("å¯åŠ¨å¤±è´¥:", e);
                alert("ç½‘é¡µä»£ç æœ‰é”™ï¼Œè¯·æ£€æŸ¥ PROJECTS æ¸…å•æ ¼å¼ï¼");
            }
        }

        function createFilterBtn(id, zh, en, isActive=false) {
            const btn = document.createElement('div');
            btn.className = `filter-btn ${isActive ? 'active' : ''}`;
            btn.innerHTML = `<span class="zh">${zh}</span><span class="en">${en}</span>`;
            btn.onclick = () => switchFilter(id, btn);
            filters.appendChild(btn);
        }

        function switchFilter(id, btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            loadCategory(id);
        }

        function loadCategory(filterId) {
            galleriesRoot.innerHTML = ''; 
            columnHeights = []; columnsDOM = [];
            pendingItems = {};

            let colCount = 4;
            const w = window.innerWidth;
            if (w <= 600) colCount = 1;
            else if (w <= 1000) colCount = 2;
            else if (w <= 1400) colCount = 3;

            for (let i = 0; i < colCount; i++) {
                const col = document.createElement('div');
                col.className = 'masonry-column';
                galleriesRoot.appendChild(col);
                columnsDOM.push(col);
                columnHeights.push(0);
            }

            // ç­›é€‰
            let items = (filterId === 'all') ? [...PROJECTS] : PROJECTS.filter(p => p.category === filterId);

            // æ’åº (åˆ†ç±»é¡ºåº)
            if (filterId === 'all') {
                items.sort((a, b) => {
                    const indexA = CATEGORIES.findIndex(c => c.id === a.category);
                    const indexB = CATEGORIES.findIndex(c => c.id === b.category);
                    return indexA - indexB;
                });
            }

            processItemsSequentially(items);
        }

        async function processItemsSequentially(items) {
            for (let i = 0; i < items.length; i++) {
                const item = items[i];
                let minIndex = 0;
                for (let j = 1; j < columnHeights.length; j++) {
                    if (columnHeights[j] < columnHeights[minIndex]) minIndex = j;
                }

                const card = createCardDOM(item);
                columnsDOM[minIndex].appendChild(card);

                const ratio = await preloadImage(`images/${item.file}`);
                columnHeights[minIndex] += (1 / ratio);
            }
        }

        function preloadImage(url) {
            return new Promise(resolve => {
                const img = new Image();
                img.src = url;
                img.onload = () => resolve(img.width / img.height);
                img.onerror = () => resolve(1.6); // å¤±è´¥ä¿åº•
            });
        }

        function createCardDOM(item) {
            const div = document.createElement('div');
            div.className = 'photo-card';
            
            const isVideo = item.file.match(/\.(mp4|mov)$/i);
            const src = `images/${item.file}`;

            let mediaHtml = isVideo 
                ? `<video src="${src}" autoplay muted loop playsinline></video><div class="video-badge">VIDEO</div>`
                : `<img src="${src}" alt="${item.title}" loading="lazy">`;

            div.innerHTML = `
                <div class="media-wrapper" style="aspect-ratio: 1.6; min-height:200px">
                    ${mediaHtml}
                </div>
                <div class="card-info">
                    <span class="card-tag">${item.category}</span>
                    <h3 class="card-title">${item.title}</h3>
                </div>
            `;
            
            // ä¿®æ­£ aspect-ratio (å›¾ç‰‡åŠ è½½åè‡ªåŠ¨æ’‘å¼€ï¼Œä¸å†å¼ºåˆ¶)
            const img = new Image();
            img.src = src;
            img.onload = function() {
                div.querySelector('.media-wrapper').style.aspectRatio = `${this.width / this.height}`;
            }

            div.onclick = () => openLightbox(src, isVideo);
            return div;
        }

        function processQueue() { /* ç®€åŒ–ç‰ˆä¸éœ€è¦é˜Ÿåˆ—ï¼Œåªè¦é¡ºåºåŠ è½½å³å¯ */ }

        function openLightbox(src, isVideo) {
            let content = isVideo 
                ? `<video src="${src}" autoplay loop controls playsinline></video>`
                : `<img src="${src}">`;
            lightboxContent.innerHTML = content;
            lightbox.classList.add('active');
        }
        function closeLightbox() {
            lightbox.classList.remove('active');
            setTimeout(() => lightboxContent.innerHTML = '', 300);
        }

        window.addEventListener('resize', () => {
            const activeBtn = document.querySelector('.filter-btn.active');
            if (activeBtn) activeBtn.click();
        });

        initPortfolio();
    </script>
</body>
</html>
